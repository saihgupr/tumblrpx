import{S as s,i as e,s as t,e as r,a,t as o,b as n,c as l,d as u,f,g as i,h as p,j as c,m,k as g,l as d}from"./client.ee8a0331.js";import{F as $}from"./FullscreenLayout.2bde9318.js";import{f as y,l as b}from"./Settings.dbb88b11.js";import"./faCloudDownloadAlt.623e1cc0.js";function j(s){let e,t;return e=new $({props:{slugstr:s[3],posts:s[0],res:s[1],after:s[2],params:s[5].query}}),{c(){p(e.$$.fragment)},l(s){c(e.$$.fragment,s)},m(s,r){m(e,s,r),t=!0},p(s,t){const r={};8&t&&(r.slugstr=s[3]),1&t&&(r.posts=s[0]),2&t&&(r.res=s[1]),4&t&&(r.after=s[2]),32&t&&(r.params=s[5].query),e.$set(r)},i(s){t||(o(e.$$.fragment,s),t=!0)},o(s){n(e.$$.fragment,s),t=!1},d(s){g(e,s)}}}function h(s){let e,t,f=0==s[4]&&j(s);return{c(){f&&f.c(),e=r()},l(s){f&&f.l(s),e=r()},m(s,r){f&&f.m(s,r),a(s,e,r),t=!0},p(s,t){let[r]=t;0==s[4]?f?(f.p(s,r),16&r&&o(f,1)):(f=j(s),f.c(),o(f,1),f.m(e.parentNode,e)):f&&(d(),n(f,1,1,()=>{f=null}),l())},i(s){t||(o(f),t=!0)},o(s){n(f),t=!1},d(s){f&&f.d(s),s&&u(e)}}}async function k(s){let{path:e,params:t,query:r}=s;if("undefined"!=typeof window)return{posts:[],after:null,res:{ok:!1,res:"Invalid API key. Please set your Tumblr API key in settings."},slugstr:r.user||"cheezbot"}}function w(s,e,t){let r,a,o;f(s,y,s=>t(7,r=s)),f(s,b,s=>t(4,a=s));const{page:n}=i();f(s,n,s=>t(5,o=s)),y.useLocalStorage({}),b.useLocalStorage(0);let{posts:l=[]}=e,{res:u}=e,{after:p}=e,{slugstr:c}=e;for(let s of l)s.favorite=!!r[s.url]?.favorite;return s.$$set=s=>{"posts"in s&&t(0,l=s.posts),"res"in s&&t(1,u=s.res),"after"in s&&t(2,p=s.after),"slugstr"in s&&t(3,c=s.slugstr)},[l,u,p,c,a,o,n]}class S extends s{constructor(s){super(),e(this,s,w,h,t,{posts:0,res:1,after:2,slugstr:3})}}export{S as default,k as preload};
