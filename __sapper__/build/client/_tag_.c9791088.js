import{S as s,i as t,s as e,e as r,a,t as o,b as n,c as l,d as u,f,g as p,h as i,j as c,m,k as g,l as d}from"./client.648243c5.js";import{F as $}from"./FullscreenLayout.9b939713.js";import{f as y,l as j}from"./Settings.44aef455.js";import"./faCloudDownloadAlt.b648c6fd.js";function b(s){let t,e;return t=new $({props:{slugstr:s[3],posts:s[0],res:s[1],after:s[2],params:s[5].query,pageType:"search"}}),{c(){i(t.$$.fragment)},l(s){c(t.$$.fragment,s)},m(s,r){m(t,s,r),e=!0},p(s,e){const r={};8&e&&(r.slugstr=s[3]),1&e&&(r.posts=s[0]),2&e&&(r.res=s[1]),4&e&&(r.after=s[2]),32&e&&(r.params=s[5].query),t.$set(r)},i(s){e||(o(t.$$.fragment,s),e=!0)},o(s){n(t.$$.fragment,s),e=!1},d(s){g(t,s)}}}function h(s){let t,e,f=0==s[4]&&b(s);return{c(){f&&f.c(),t=r()},l(s){f&&f.l(s),t=r()},m(s,r){f&&f.m(s,r),a(s,t,r),e=!0},p(s,[e]){0==s[4]?f?(f.p(s,e),16&e&&o(f,1)):(f=b(s),f.c(),o(f,1),f.m(t.parentNode,t)):f&&(d(),n(f,1,1,()=>{f=null}),l())},i(s){e||(o(f),e=!0)},o(s){n(f),e=!1},d(s){f&&f.d(s),s&&u(t)}}}async function k({path:s,params:t,query:e}){if("undefined"==typeof window)return;return{posts:[],after:null,res:{ok:!1,res:"Invalid API key. Please set your Tumblr API key in settings."},slugstr:t.tag}}function w(s,t,e){let r,a,o;f(s,y,s=>e(7,r=s)),f(s,j,s=>e(4,a=s));const{page:n}=p();f(s,n,s=>e(5,o=s)),y.useLocalStorage({}),j.useLocalStorage(0);let{posts:l=[]}=t,{res:u}=t,{after:i}=t,{slugstr:c}=t;for(let s of l)s.favorite=!!r[s.url]?.favorite;return s.$$set=s=>{"posts"in s&&e(0,l=s.posts),"res"in s&&e(1,u=s.res),"after"in s&&e(2,i=s.after),"slugstr"in s&&e(3,c=s.slugstr)},[l,u,i,c,a,o,n]}class S extends s{constructor(s){super(),t(this,s,w,h,e,{posts:0,res:1,after:2,slugstr:3})}}export{S as default,k as preload};
