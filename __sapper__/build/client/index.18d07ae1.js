import{S as s,i as t,s as r,c as a,a as e,m as o,t as f,b as n,d as u,e as l,f as p,g as i,h as c,j as m,k as g,l as d}from"./client.f020807d.js";import{q as $,g as y,F as b}from"./FullscreenLayout.db331a14.js";import{f as j,l as q}from"./Settings.f01afc30.js";import"./faHome.cd4c86bc.js";import"./faStar.e6805895.js";function h(s){let t,r;return t=new b({props:{slugstr:s[3],posts:s[0],res:s[1],after:s[2],params:s[5].query}}),{c(){a(t.$$.fragment)},l(s){e(t.$$.fragment,s)},m(s,a){o(t,s,a),r=!0},p(s,r){const a={};8&r&&(a.slugstr=s[3]),1&r&&(a.posts=s[0]),2&r&&(a.res=s[1]),4&r&&(a.after=s[2]),32&r&&(a.params=s[5].query),t.$set(a)},i(s){r||(f(t.$$.fragment,s),r=!0)},o(s){n(t.$$.fragment,s),r=!1},d(s){u(t,s)}}}function S(s){let t,r,a=0==s[4]&&h(s);return{c(){a&&a.c(),t=l()},l(s){a&&a.l(s),t=l()},m(s,e){a&&a.m(s,e),p(s,t,e),r=!0},p(s,[r]){0==s[4]?a?(a.p(s,r),16&r&&f(a,1)):(a=h(s),a.c(),f(a,1),a.m(t.parentNode,t)):a&&(d(),n(a,1,1,(()=>{a=null})),i())},i(s){r||(f(a),r=!0)},o(s){n(a),r=!1},d(s){a&&a.d(s),s&&c(t)}}}async function k({path:s,params:t,query:r}){if("undefined"==typeof window)return;let a=t.slug,e=`https://api.tumblr.com/v2/blog/${a}/posts?api_key=ru6b4z2sDMz7h0WyCULiNuqqgDfgubrdQZtZrVUkXQGkzFPTrF&${$(r)}`,{posts:o,res:f,after:n}=await y(e);return{posts:o,after:n,res:f,slugstr:a}}function w(s,t,r){let a,e,o;m(s,j,(s=>r(7,a=s))),m(s,q,(s=>r(4,e=s)));const{page:f}=g();m(s,f,(s=>r(5,o=s))),j.useLocalStorage({}),q.useLocalStorage(0);let{posts:n=[]}=t,{res:u}=t,{after:l}=t,{slugstr:p}=t;for(let s of n)s.favorite=!!a[s.url]?.favorite;return s.$$set=s=>{"posts"in s&&r(0,n=s.posts),"res"in s&&r(1,u=s.res),"after"in s&&r(2,l=s.after),"slugstr"in s&&r(3,p=s.slugstr)},[n,u,l,p,e,o,f]}class F extends s{constructor(s){super(),t(this,s,w,S,r,{posts:0,res:1,after:2,slugstr:3})}}export{F as default,k as preload};
